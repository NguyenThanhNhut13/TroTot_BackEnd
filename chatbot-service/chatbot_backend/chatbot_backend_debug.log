2025-06-03 23:23:46.897 | ERROR    | chatbot_app.py:28 | GEMINI_API_KEY environment variable is not set. Please set it for Gemini API access.
2025-06-03 23:25:33.506 | WARNING  | chatbot_app.py:38 | MCP_SERVER_BASE_URL is set to default localhost. Ensure this is correct for your deployment.
2025-06-03 23:25:33.507 | INFO     | before.py:40 | Starting call to 'chatbot_app.get_tool_definitions_from_mcp_server', this is the 1st time calling it.
2025-06-03 23:25:33.508 | INFO     | chatbot_app.py:46 | Attempting to load tool definitions from MCP Server at http://localhost:5001/tool_definitions...
2025-06-03 23:25:35.573 | INFO     | chatbot_app.py:49 | Successfully loaded tool definitions from MCP Server.
2025-06-03 23:28:21.699 | WARNING  | chatbot_app.py:38 | MCP_SERVER_BASE_URL is set to default localhost. Ensure this is correct for your deployment.
2025-06-03 23:28:21.700 | INFO     | before.py:40 | Starting call to 'chatbot_app.get_tool_definitions_from_mcp_server', this is the 1st time calling it.
2025-06-03 23:28:21.701 | INFO     | chatbot_app.py:46 | Attempting to load tool definitions from MCP Server at http://localhost:5001/tool_definitions...
2025-06-03 23:28:23.746 | INFO     | chatbot_app.py:49 | Successfully loaded tool definitions from MCP Server.
2025-06-03 23:28:23.747 | INFO     | chatbot_app.py:82 | Fixed tool definitions: [{'name': 'search_rooms', 'description': 'Tìm kiếm các phòng trọ có sẵn dựa trên các tiêu chí cụ thể như vị trí, giá cả, tiện ích và môi trường xung quanh.', 'parameters': {'type': 'OBJECT', 'properties': {'street': {'type': 'string', 'description': 'Tên đường của phòng trọ.'}, 'district': {'type': 'string', 'description': 'Quận của phòng trọ.'}, 'city': {'type': 'string', 'description': 'Thành phố của phòng trọ.'}, 'minPrice': {'type': 'number', 'description': 'Giá tối thiểu của phòng trọ.'}, 'maxPrice': {'type': 'number', 'description': 'Giá tối đa của phòng trọ.'}, 'areaRange': {'type': 'string', 'enum': ['UNDER_20', '20_40', '40_60', '60_80', 'OVER_80'], 'description': "Khoảng diện tích phòng trọ. Các giá trị hợp lệ:\n- 'UNDER_20': Dưới 20m²\n- '20_40': Từ 20m² đến 40m²\n- '40_60': Từ 40m² đến 60m²\n- '60_80': Từ 60m² đến 80m²\n- 'OVER_80': Trên 80m²\nNếu không khớp giá trị nào, sẽ không lọc theo diện tích."}, 'roomType': {'type': 'string', 'description': 'Loại phòng trọ.'}, 'amenities': {'type': 'array', 'items': {'type': 'string'}, 'description': 'Danh sách các tiện ích mong muốn.'}, 'environment': {'type': 'array', 'items': {'type': 'string'}, 'description': 'Môi trường xung quanh phòng trọ.'}, 'targetAudience': {'type': 'array', 'items': {'type': 'string'}, 'description': 'Đối tượng mục tiêu của phòng trọ.'}, 'hasVideoReview': {'type': ['boolean', None], 'description': 'Phòng trọ có video review hay không. Nếu không cung cấp, sẽ không lọc theo tiêu chí này.'}}, 'required': []}}]
2025-06-03 23:30:24.821 | WARNING  | chatbot_app.py:38 | MCP_SERVER_BASE_URL is set to default localhost. Ensure this is correct for your deployment.
2025-06-03 23:30:24.821 | INFO     | before.py:40 | Starting call to 'chatbot_app.get_tool_definitions_from_mcp_server', this is the 1st time calling it.
2025-06-03 23:30:24.822 | INFO     | chatbot_app.py:46 | Attempting to load tool definitions from MCP Server at http://localhost:5001/tool_definitions...
2025-06-03 23:30:26.901 | INFO     | chatbot_app.py:49 | Successfully loaded tool definitions from MCP Server.
2025-06-03 23:32:04.434 | WARNING  | chatbot_app.py:38 | MCP_SERVER_BASE_URL is set to default localhost. Ensure this is correct for your deployment.
2025-06-03 23:32:04.434 | INFO     | before.py:40 | Starting call to 'chatbot_app.get_tool_definitions_from_mcp_server', this is the 1st time calling it.
2025-06-03 23:32:04.434 | INFO     | chatbot_app.py:46 | Attempting to load tool definitions from MCP Server at http://localhost:5001/tool_definitions...
2025-06-03 23:32:06.480 | INFO     | chatbot_app.py:49 | Successfully loaded tool definitions from MCP Server.
2025-06-03 23:32:06.482 | INFO     | chatbot_app.py:102 | Fixed tool definitions: [{'name': 'search_rooms', 'description': 'Tìm kiếm các phòng trọ có sẵn dựa trên các tiêu chí cụ thể như vị trí, giá cả, tiện ích và môi trường xung quanh.', 'parameters': {'type': 'OBJECT', 'properties': {'street': {'type': 'STRING', 'description': 'Tên đường của phòng trọ.'}, 'district': {'type': 'STRING', 'description': 'Quận của phòng trọ.'}, 'city': {'type': 'STRING', 'description': 'Thành phố của phòng trọ.'}, 'minPrice': {'type': 'NUMBER', 'description': 'Giá tối thiểu của phòng trọ.'}, 'maxPrice': {'type': 'NUMBER', 'description': 'Giá tối đa của phòng trọ.'}, 'areaRange': {'type': 'STRING', 'enum': ['UNDER_20', '20_40', '40_60', '60_80', 'OVER_80'], 'description': "Khoảng diện tích phòng trọ. Các giá trị hợp lệ:\n- 'UNDER_20': Dưới 20m²\n- '20_40': Từ 20m² đến 40m²\n- '40_60': Từ 40m² đến 60m²\n- '60_80': Từ 60m² đến 80m²\n- 'OVER_80': Trên 80m²\nNếu không khớp giá trị nào, sẽ không lọc theo diện tích."}, 'roomType': {'type': 'STRING', 'description': 'Loại phòng trọ.'}, 'amenities': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Danh sách các tiện ích mong muốn.'}, 'environment': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Môi trường xung quanh phòng trọ.'}, 'targetAudience': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Đối tượng mục tiêu của phòng trọ.'}, 'hasVideoReview': {'type': 'BOOLEAN', 'description': 'Phòng trọ có video review hay không. Nếu không cung cấp, sẽ không lọc theo tiêu chí này.'}}, 'required': []}}]
2025-06-03 23:32:47.106 | WARNING  | chatbot_app.py:40 | MCP_SERVER_BASE_URL is set to default localhost. Ensure this is correct for your deployment.
2025-06-03 23:32:47.107 | INFO     | before.py:40 | Starting call to 'chatbot_app.get_tool_definitions_from_mcp_server', this is the 1st time calling it.
2025-06-03 23:32:47.107 | INFO     | chatbot_app.py:48 | Attempting to load tool definitions from MCP Server at http://localhost:5001/tool_definitions...
2025-06-03 23:32:49.165 | INFO     | chatbot_app.py:51 | Successfully loaded tool definitions from MCP Server.
2025-06-03 23:32:49.165 | INFO     | chatbot_app.py:104 | Fixed tool definitions: [{'name': 'search_rooms', 'description': 'Tìm kiếm các phòng trọ có sẵn dựa trên các tiêu chí cụ thể như vị trí, giá cả, tiện ích và môi trường xung quanh.', 'parameters': {'type': 'OBJECT', 'properties': {'street': {'type': 'STRING', 'description': 'Tên đường của phòng trọ.'}, 'district': {'type': 'STRING', 'description': 'Quận của phòng trọ.'}, 'city': {'type': 'STRING', 'description': 'Thành phố của phòng trọ.'}, 'minPrice': {'type': 'NUMBER', 'description': 'Giá tối thiểu của phòng trọ.'}, 'maxPrice': {'type': 'NUMBER', 'description': 'Giá tối đa của phòng trọ.'}, 'areaRange': {'type': 'STRING', 'enum': ['UNDER_20', '20_40', '40_60', '60_80', 'OVER_80'], 'description': "Khoảng diện tích phòng trọ. Các giá trị hợp lệ:\n- 'UNDER_20': Dưới 20m²\n- '20_40': Từ 20m² đến 40m²\n- '40_60': Từ 40m² đến 60m²\n- '60_80': Từ 60m² đến 80m²\n- 'OVER_80': Trên 80m²\nNếu không khớp giá trị nào, sẽ không lọc theo diện tích."}, 'roomType': {'type': 'STRING', 'description': 'Loại phòng trọ.'}, 'amenities': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Danh sách các tiện ích mong muốn.'}, 'environment': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Môi trường xung quanh phòng trọ.'}, 'targetAudience': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Đối tượng mục tiêu của phòng trọ.'}, 'hasVideoReview': {'type': 'BOOLEAN', 'description': 'Phòng trọ có video review hay không. Nếu không cung cấp, sẽ không lọc theo tiêu chí này.'}}, 'required': []}}]
2025-06-03 23:33:47.223 | WARNING  | chatbot_app.py:42 | MCP_SERVER_BASE_URL is set to default localhost. Ensure this is correct for your deployment.
2025-06-03 23:33:47.224 | INFO     | before.py:40 | Starting call to 'chatbot_app.get_tool_definitions_from_mcp_server', this is the 1st time calling it.
2025-06-03 23:33:47.224 | INFO     | chatbot_app.py:50 | Attempting to load tool definitions from MCP Server at http://localhost:5001/tool_definitions...
2025-06-03 23:33:49.280 | INFO     | chatbot_app.py:53 | Successfully loaded tool definitions from MCP Server.
2025-06-03 23:33:49.281 | INFO     | chatbot_app.py:106 | Fixed tool definitions: [{'name': 'search_rooms', 'description': 'Tìm kiếm các phòng trọ có sẵn dựa trên các tiêu chí cụ thể như vị trí, giá cả, tiện ích và môi trường xung quanh.', 'parameters': {'type': 'OBJECT', 'properties': {'street': {'type': 'STRING', 'description': 'Tên đường của phòng trọ.'}, 'district': {'type': 'STRING', 'description': 'Quận của phòng trọ.'}, 'city': {'type': 'STRING', 'description': 'Thành phố của phòng trọ.'}, 'minPrice': {'type': 'NUMBER', 'description': 'Giá tối thiểu của phòng trọ.'}, 'maxPrice': {'type': 'NUMBER', 'description': 'Giá tối đa của phòng trọ.'}, 'areaRange': {'type': 'STRING', 'enum': ['UNDER_20', '20_40', '40_60', '60_80', 'OVER_80'], 'description': "Khoảng diện tích phòng trọ. Các giá trị hợp lệ:\n- 'UNDER_20': Dưới 20m²\n- '20_40': Từ 20m² đến 40m²\n- '40_60': Từ 40m² đến 60m²\n- '60_80': Từ 60m² đến 80m²\n- 'OVER_80': Trên 80m²\nNếu không khớp giá trị nào, sẽ không lọc theo diện tích."}, 'roomType': {'type': 'STRING', 'description': 'Loại phòng trọ.'}, 'amenities': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Danh sách các tiện ích mong muốn.'}, 'environment': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Môi trường xung quanh phòng trọ.'}, 'targetAudience': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Đối tượng mục tiêu của phòng trọ.'}, 'hasVideoReview': {'type': 'BOOLEAN', 'description': 'Phòng trọ có video review hay không. Nếu không cung cấp, sẽ không lọc theo tiêu chí này.'}}, 'required': []}}]
2025-06-03 23:37:27.786 | WARNING  | chatbot_app.py:42 | MCP_SERVER_BASE_URL is set to default localhost. Ensure this is correct for your deployment.
2025-06-03 23:37:27.787 | INFO     | before.py:40 | Starting call to 'chatbot_app.get_tool_definitions_from_mcp_server', this is the 1st time calling it.
2025-06-03 23:37:27.787 | INFO     | chatbot_app.py:50 | Attempting to load tool definitions from MCP Server at http://localhost:5001/tool_definitions...
2025-06-03 23:37:29.844 | INFO     | chatbot_app.py:53 | Successfully loaded tool definitions from MCP Server.
2025-06-03 23:37:29.844 | INFO     | chatbot_app.py:106 | Fixed tool definitions: [{'name': 'search_rooms', 'description': 'Tìm kiếm các phòng trọ có sẵn dựa trên các tiêu chí cụ thể như vị trí, giá cả, tiện ích và môi trường xung quanh.', 'parameters': {'type': 'OBJECT', 'properties': {'street': {'type': 'STRING', 'description': 'Tên đường của phòng trọ.'}, 'district': {'type': 'STRING', 'description': 'Quận của phòng trọ.'}, 'city': {'type': 'STRING', 'description': 'Thành phố của phòng trọ.'}, 'minPrice': {'type': 'NUMBER', 'description': 'Giá tối thiểu của phòng trọ.'}, 'maxPrice': {'type': 'NUMBER', 'description': 'Giá tối đa của phòng trọ.'}, 'areaRange': {'type': 'STRING', 'enum': ['UNDER_20', '20_40', '40_60', '60_80', 'OVER_80'], 'description': "Khoảng diện tích phòng trọ. Các giá trị hợp lệ:\n- 'UNDER_20': Dưới 20m²\n- '20_40': Từ 20m² đến 40m²\n- '40_60': Từ 40m² đến 60m²\n- '60_80': Từ 60m² đến 80m²\n- 'OVER_80': Trên 80m²\nNếu không khớp giá trị nào, sẽ không lọc theo diện tích."}, 'roomType': {'type': 'STRING', 'description': 'Loại phòng trọ.'}, 'amenities': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Danh sách các tiện ích mong muốn.'}, 'environment': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Môi trường xung quanh phòng trọ.'}, 'targetAudience': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Đối tượng mục tiêu của phòng trọ.'}, 'hasVideoReview': {'type': 'BOOLEAN', 'description': 'Phòng trọ có video review hay không. Nếu không cung cấp, sẽ không lọc theo tiêu chí này.'}}, 'required': []}}]
2025-06-03 23:38:18.940 | WARNING  | chatbot_app.py:42 | MCP_SERVER_BASE_URL is set to default localhost. Ensure this is correct for your deployment.
2025-06-03 23:38:18.941 | INFO     | before.py:40 | Starting call to 'chatbot_app.get_tool_definitions_from_mcp_server', this is the 1st time calling it.
2025-06-03 23:38:18.942 | INFO     | chatbot_app.py:50 | Attempting to load tool definitions from MCP Server at http://localhost:5001/tool_definitions...
2025-06-03 23:38:21.015 | INFO     | chatbot_app.py:53 | Successfully loaded tool definitions from MCP Server.
2025-06-03 23:38:21.015 | INFO     | chatbot_app.py:106 | Fixed tool definitions: [{'name': 'search_rooms', 'description': 'Tìm kiếm các phòng trọ có sẵn dựa trên các tiêu chí cụ thể như vị trí, giá cả, tiện ích và môi trường xung quanh.', 'parameters': {'type': 'OBJECT', 'properties': {'street': {'type': 'STRING', 'description': 'Tên đường của phòng trọ.'}, 'district': {'type': 'STRING', 'description': 'Quận của phòng trọ.'}, 'city': {'type': 'STRING', 'description': 'Thành phố của phòng trọ.'}, 'minPrice': {'type': 'NUMBER', 'description': 'Giá tối thiểu của phòng trọ.'}, 'maxPrice': {'type': 'NUMBER', 'description': 'Giá tối đa của phòng trọ.'}, 'areaRange': {'type': 'STRING', 'enum': ['UNDER_20', '20_40', '40_60', '60_80', 'OVER_80'], 'description': "Khoảng diện tích phòng trọ. Các giá trị hợp lệ:\n- 'UNDER_20': Dưới 20m²\n- '20_40': Từ 20m² đến 40m²\n- '40_60': Từ 40m² đến 60m²\n- '60_80': Từ 60m² đến 80m²\n- 'OVER_80': Trên 80m²\nNếu không khớp giá trị nào, sẽ không lọc theo diện tích."}, 'roomType': {'type': 'STRING', 'description': 'Loại phòng trọ.'}, 'amenities': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Danh sách các tiện ích mong muốn.'}, 'environment': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Môi trường xung quanh phòng trọ.'}, 'targetAudience': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Đối tượng mục tiêu của phòng trọ.'}, 'hasVideoReview': {'type': 'BOOLEAN', 'description': 'Phòng trọ có video review hay không. Nếu không cung cấp, sẽ không lọc theo tiêu chí này.'}}, 'required': []}}]
2025-06-03 23:43:11.035 | WARNING  | chatbot_app.py:43 | MCP_SERVER_BASE_URL is set to default localhost. Ensure this is correct for your deployment.
2025-06-03 23:43:11.036 | INFO     | before.py:40 | Starting call to 'chatbot_app.get_tool_definitions_from_mcp_server', this is the 1st time calling it.
2025-06-03 23:43:11.036 | INFO     | chatbot_app.py:51 | Attempting to load tool definitions from MCP Server at http://localhost:5001/tool_definitions...
2025-06-03 23:43:13.100 | INFO     | chatbot_app.py:54 | Successfully loaded tool definitions from MCP Server.
2025-06-03 23:43:13.102 | INFO     | chatbot_app.py:107 | Fixed tool definitions: [{'name': 'search_rooms', 'description': 'Tìm kiếm các phòng trọ có sẵn dựa trên các tiêu chí cụ thể như vị trí, giá cả, tiện ích và môi trường xung quanh.', 'parameters': {'type': 'OBJECT', 'properties': {'street': {'type': 'STRING', 'description': 'Tên đường của phòng trọ.'}, 'district': {'type': 'STRING', 'description': 'Quận của phòng trọ.'}, 'city': {'type': 'STRING', 'description': 'Thành phố của phòng trọ.'}, 'minPrice': {'type': 'NUMBER', 'description': 'Giá tối thiểu của phòng trọ.'}, 'maxPrice': {'type': 'NUMBER', 'description': 'Giá tối đa của phòng trọ.'}, 'areaRange': {'type': 'STRING', 'enum': ['UNDER_20', '20_40', '40_60', '60_80', 'OVER_80'], 'description': "Khoảng diện tích phòng trọ. Các giá trị hợp lệ:\n- 'UNDER_20': Dưới 20m²\n- '20_40': Từ 20m² đến 40m²\n- '40_60': Từ 40m² đến 60m²\n- '60_80': Từ 60m² đến 80m²\n- 'OVER_80': Trên 80m²\nNếu không khớp giá trị nào, sẽ không lọc theo diện tích."}, 'roomType': {'type': 'STRING', 'description': 'Loại phòng trọ.'}, 'amenities': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Danh sách các tiện ích mong muốn.'}, 'environment': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Môi trường xung quanh phòng trọ.'}, 'targetAudience': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Đối tượng mục tiêu của phòng trọ.'}, 'hasVideoReview': {'type': 'BOOLEAN', 'description': 'Phòng trọ có video review hay không. Nếu không cung cấp, sẽ không lọc theo tiêu chí này.'}}, 'required': []}}]
2025-06-03 23:43:37.946 | INFO     | chatbot_app.py:139 | User: Tôi cần tìm phòng trọ ở quận 10 với giá dưới 3 triệu
2025-06-03 23:43:38.904 | INFO     | chatbot_app.py:152 | Gemini wants to call tool: 'search_rooms' with arguments: <proto.marshal.collections.maps.MapComposite object at 0x000002815B0B7650>
2025-06-03 23:43:38.908 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 1st time calling it.
2025-06-03 23:43:38.909 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: <proto.marshal.collections.maps.MapComposite object at 0x000002815B0B7650>
2025-06-03 23:43:40.917 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 2nd time calling it.
2025-06-03 23:43:40.917 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: <proto.marshal.collections.maps.MapComposite object at 0x000002815B0B7650>
2025-06-03 23:43:42.919 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 3rd time calling it.
2025-06-03 23:43:42.919 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: <proto.marshal.collections.maps.MapComposite object at 0x000002815B0B7650>
2025-06-03 23:43:42.921 | ERROR    | chatbot_app.py:159 | Failed to execute tool 'search_rooms' after retries: RetryError[<Future at 0x2815b575210 state=finished raised TypeError>]
2025-06-03 23:43:42.922 | ERROR    | chatbot_app.py:174 | Error from MCP Server: Không thể thực hiện tìm kiếm phòng trọ lúc này: RetryError[<Future at 0x2815b575210 state=finished raised TypeError>]
2025-06-03 23:44:46.513 | WARNING  | chatbot_app.py:43 | MCP_SERVER_BASE_URL is set to default localhost. Ensure this is correct for your deployment.
2025-06-03 23:44:46.514 | INFO     | before.py:40 | Starting call to 'chatbot_app.get_tool_definitions_from_mcp_server', this is the 1st time calling it.
2025-06-03 23:44:46.514 | INFO     | chatbot_app.py:51 | Attempting to load tool definitions from MCP Server at http://localhost:5001/tool_definitions...
2025-06-03 23:44:48.543 | INFO     | chatbot_app.py:54 | Successfully loaded tool definitions from MCP Server.
2025-06-03 23:44:48.544 | INFO     | chatbot_app.py:107 | Fixed tool definitions: [{'name': 'search_rooms', 'description': 'Tìm kiếm các phòng trọ có sẵn dựa trên các tiêu chí cụ thể như vị trí, giá cả, tiện ích và môi trường xung quanh.', 'parameters': {'type': 'OBJECT', 'properties': {'street': {'type': 'STRING', 'description': 'Tên đường của phòng trọ.'}, 'district': {'type': 'STRING', 'description': 'Quận của phòng trọ.'}, 'city': {'type': 'STRING', 'description': 'Thành phố của phòng trọ.'}, 'minPrice': {'type': 'NUMBER', 'description': 'Giá tối thiểu của phòng trọ.'}, 'maxPrice': {'type': 'NUMBER', 'description': 'Giá tối đa của phòng trọ.'}, 'areaRange': {'type': 'STRING', 'enum': ['UNDER_20', '20_40', '40_60', '60_80', 'OVER_80'], 'description': "Khoảng diện tích phòng trọ. Các giá trị hợp lệ:\n- 'UNDER_20': Dưới 20m²\n- '20_40': Từ 20m² đến 40m²\n- '40_60': Từ 40m² đến 60m²\n- '60_80': Từ 60m² đến 80m²\n- 'OVER_80': Trên 80m²\nNếu không khớp giá trị nào, sẽ không lọc theo diện tích."}, 'roomType': {'type': 'STRING', 'description': 'Loại phòng trọ.'}, 'amenities': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Danh sách các tiện ích mong muốn.'}, 'environment': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Môi trường xung quanh phòng trọ.'}, 'targetAudience': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Đối tượng mục tiêu của phòng trọ.'}, 'hasVideoReview': {'type': 'BOOLEAN', 'description': 'Phòng trọ có video review hay không. Nếu không cung cấp, sẽ không lọc theo tiêu chí này.'}}, 'required': []}}]
2025-06-03 23:44:58.283 | INFO     | chatbot_app.py:139 | User: Tôi cần tìm phòng trọ ở quận 10 với giá dưới 3 triệu
2025-06-03 23:45:00.216 | INFO     | chatbot_app.py:152 | Gemini wants to call tool: 'search_rooms' with arguments: <proto.marshal.collections.maps.MapComposite object at 0x000001FAC5E33B50>
2025-06-03 23:45:00.220 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 1st time calling it.
2025-06-03 23:45:00.221 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: <proto.marshal.collections.maps.MapComposite object at 0x000001FAC5E33B50>
2025-06-03 23:45:02.232 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 2nd time calling it.
2025-06-03 23:45:02.232 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: <proto.marshal.collections.maps.MapComposite object at 0x000001FAC5E33B50>
2025-06-03 23:45:04.239 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 3rd time calling it.
2025-06-03 23:45:04.239 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: <proto.marshal.collections.maps.MapComposite object at 0x000001FAC5E33B50>
2025-06-03 23:45:04.241 | ERROR    | chatbot_app.py:159 | Failed to execute tool 'search_rooms' after retries: RetryError[<Future at 0x1fac62e43d0 state=finished raised TypeError>]
2025-06-03 23:45:04.241 | ERROR    | chatbot_app.py:174 | Error from MCP Server: Không thể thực hiện tìm kiếm phòng trọ lúc này: RetryError[<Future at 0x1fac62e43d0 state=finished raised TypeError>]
2025-06-03 23:45:04.242 | ERROR    | chatbot_app.py:190 | An unexpected error occurred in chatbot: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['name', 'response']"
2025-06-03 23:45:22.398 | INFO     | chatbot_app.py:139 | User: Tôi cần tìm phòng trọ ở quận Gò Vấp với giá dưới 3 triệu
2025-06-03 23:45:23.333 | INFO     | chatbot_app.py:152 | Gemini wants to call tool: 'search_rooms' with arguments: <proto.marshal.collections.maps.MapComposite object at 0x000001FAC62E5E10>
2025-06-03 23:45:23.336 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 1st time calling it.
2025-06-03 23:45:23.336 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: <proto.marshal.collections.maps.MapComposite object at 0x000001FAC62E5E10>
2025-06-03 23:45:25.344 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 2nd time calling it.
2025-06-03 23:45:25.345 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: <proto.marshal.collections.maps.MapComposite object at 0x000001FAC62E5E10>
2025-06-03 23:45:27.349 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 3rd time calling it.
2025-06-03 23:45:27.349 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: <proto.marshal.collections.maps.MapComposite object at 0x000001FAC62E5E10>
2025-06-03 23:45:27.349 | ERROR    | chatbot_app.py:159 | Failed to execute tool 'search_rooms' after retries: RetryError[<Future at 0x1fac62e7a90 state=finished raised TypeError>]
2025-06-03 23:45:27.349 | ERROR    | chatbot_app.py:174 | Error from MCP Server: Không thể thực hiện tìm kiếm phòng trọ lúc này: RetryError[<Future at 0x1fac62e7a90 state=finished raised TypeError>]
2025-06-03 23:45:27.349 | ERROR    | chatbot_app.py:190 | An unexpected error occurred in chatbot: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['name', 'response']"
2025-06-03 23:45:40.027 | INFO     | chatbot_app.py:139 | User: Tôi cần tìm phòng trọ ở với giá dưới 3 triệu
2025-06-03 23:45:40.824 | INFO     | chatbot_app.py:186 | Gemini responded directly: Bạn cần cho tôi biết bạn muốn tìm phòng trọ ở thành phố và quận nào thì tôi mới có thể tìm được.
2025-06-03 23:46:06.801 | INFO     | chatbot_app.py:139 | User: Tôi cần tìm phòng trọ ở thành phố Hồ Chí Minh, quận Gò Vấp với giá dưới 3 triệu
2025-06-03 23:46:08.620 | INFO     | chatbot_app.py:152 | Gemini wants to call tool: 'search_rooms' with arguments: <proto.marshal.collections.maps.MapComposite object at 0x000001FAC62E9AD0>
2025-06-03 23:46:08.624 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 1st time calling it.
2025-06-03 23:46:08.625 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: <proto.marshal.collections.maps.MapComposite object at 0x000001FAC62E9AD0>
2025-06-03 23:46:10.632 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 2nd time calling it.
2025-06-03 23:46:10.632 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: <proto.marshal.collections.maps.MapComposite object at 0x000001FAC62E9AD0>
2025-06-03 23:46:12.634 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 3rd time calling it.
2025-06-03 23:46:12.635 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: <proto.marshal.collections.maps.MapComposite object at 0x000001FAC62E9AD0>
2025-06-03 23:46:12.642 | ERROR    | chatbot_app.py:159 | Failed to execute tool 'search_rooms' after retries: RetryError[<Future at 0x1fac62ea3d0 state=finished raised TypeError>]
2025-06-03 23:46:12.647 | ERROR    | chatbot_app.py:174 | Error from MCP Server: Không thể thực hiện tìm kiếm phòng trọ lúc này: RetryError[<Future at 0x1fac62ea3d0 state=finished raised TypeError>]
2025-06-03 23:46:12.651 | ERROR    | chatbot_app.py:190 | An unexpected error occurred in chatbot: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['name', 'response']"
2025-06-03 23:46:31.384 | INFO     | chatbot_app.py:139 | User: Tôi cần tìm phòng trọ ở thành phố Hồ Chí Minh, quận Gò Vấp với giá dưới 3 triệu
2025-06-03 23:46:32.255 | INFO     | chatbot_app.py:152 | Gemini wants to call tool: 'search_rooms' with arguments: <proto.marshal.collections.maps.MapComposite object at 0x000001FAC62F8790>
2025-06-03 23:46:32.256 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 1st time calling it.
2025-06-03 23:46:32.257 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: <proto.marshal.collections.maps.MapComposite object at 0x000001FAC62F8790>
2025-06-03 23:46:34.260 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 2nd time calling it.
2025-06-03 23:46:34.260 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: <proto.marshal.collections.maps.MapComposite object at 0x000001FAC62F8790>
2025-06-03 23:46:36.265 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 3rd time calling it.
2025-06-03 23:46:36.265 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: <proto.marshal.collections.maps.MapComposite object at 0x000001FAC62F8790>
2025-06-03 23:46:36.268 | ERROR    | chatbot_app.py:159 | Failed to execute tool 'search_rooms' after retries: RetryError[<Future at 0x1fac62f9e50 state=finished raised TypeError>]
2025-06-03 23:46:36.269 | ERROR    | chatbot_app.py:174 | Error from MCP Server: Không thể thực hiện tìm kiếm phòng trọ lúc này: RetryError[<Future at 0x1fac62f9e50 state=finished raised TypeError>]
2025-06-03 23:46:36.270 | ERROR    | chatbot_app.py:190 | An unexpected error occurred in chatbot: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['name', 'response']"
2025-06-03 23:47:22.332 | WARNING  | chatbot_app.py:43 | MCP_SERVER_BASE_URL is set to default localhost. Ensure this is correct for your deployment.
2025-06-03 23:47:22.333 | INFO     | before.py:40 | Starting call to 'chatbot_app.get_tool_definitions_from_mcp_server', this is the 1st time calling it.
2025-06-03 23:47:22.334 | INFO     | chatbot_app.py:51 | Attempting to load tool definitions from MCP Server at http://localhost:5001/tool_definitions...
2025-06-03 23:47:24.386 | INFO     | chatbot_app.py:54 | Successfully loaded tool definitions from MCP Server.
2025-06-03 23:47:24.388 | INFO     | chatbot_app.py:107 | Fixed tool definitions: [{'name': 'search_rooms', 'description': 'Tìm kiếm các phòng trọ có sẵn dựa trên các tiêu chí cụ thể như vị trí, giá cả, tiện ích và môi trường xung quanh.', 'parameters': {'type': 'OBJECT', 'properties': {'street': {'type': 'STRING', 'description': 'Tên đường của phòng trọ.'}, 'district': {'type': 'STRING', 'description': 'Quận của phòng trọ.'}, 'city': {'type': 'STRING', 'description': 'Thành phố của phòng trọ.'}, 'minPrice': {'type': 'NUMBER', 'description': 'Giá tối thiểu của phòng trọ.'}, 'maxPrice': {'type': 'NUMBER', 'description': 'Giá tối đa của phòng trọ.'}, 'areaRange': {'type': 'STRING', 'enum': ['UNDER_20', '20_40', '40_60', '60_80', 'OVER_80'], 'description': "Khoảng diện tích phòng trọ. Các giá trị hợp lệ:\n- 'UNDER_20': Dưới 20m²\n- '20_40': Từ 20m² đến 40m²\n- '40_60': Từ 40m² đến 60m²\n- '60_80': Từ 60m² đến 80m²\n- 'OVER_80': Trên 80m²\nNếu không khớp giá trị nào, sẽ không lọc theo diện tích."}, 'roomType': {'type': 'STRING', 'description': 'Loại phòng trọ.'}, 'amenities': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Danh sách các tiện ích mong muốn.'}, 'environment': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Môi trường xung quanh phòng trọ.'}, 'targetAudience': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Đối tượng mục tiêu của phòng trọ.'}, 'hasVideoReview': {'type': 'BOOLEAN', 'description': 'Phòng trọ có video review hay không. Nếu không cung cấp, sẽ không lọc theo tiêu chí này.'}}, 'required': []}}]
2025-06-03 23:47:29.587 | INFO     | chatbot_app.py:139 | User: Tôi cần tìm phòng trọ ở thành phố Hồ Chí Minh, quận Gò Vấp với giá dưới 3 triệu
2025-06-03 23:47:30.516 | INFO     | chatbot_app.py:153 | Gemini wants to call tool: 'search_rooms' with arguments: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-03 23:47:30.516 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 1st time calling it.
2025-06-03 23:47:30.517 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-03 23:47:32.592 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-03 23:47:34.594 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 2nd time calling it.
2025-06-03 23:47:34.595 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-03 23:47:36.670 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-03 23:47:38.673 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 3rd time calling it.
2025-06-03 23:47:38.673 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-03 23:47:40.757 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-03 23:47:40.760 | ERROR    | chatbot_app.py:160 | Failed to execute tool 'search_rooms' after retries: RetryError[<Future at 0x23061a76fd0 state=finished raised HTTPError>]
2025-06-03 23:47:40.760 | ERROR    | chatbot_app.py:172 | Error from MCP Server: Không thể thực hiện tìm kiếm phòng trọ lúc này: RetryError[<Future at 0x23061a76fd0 state=finished raised HTTPError>]
2025-06-03 23:47:41.616 | INFO     | chatbot_app.py:177 | Bot (Error): Tôi rất tiếc vì đã không thể tìm phòng trọ cho bạn lúc này. Có vẻ như hệ thống đang gặp sự cố. Bạn có muốn thử lại sau không?

2025-06-03 23:48:41.848 | WARNING  | chatbot_app.py:43 | MCP_SERVER_BASE_URL is set to default localhost. Ensure this is correct for your deployment.
2025-06-03 23:48:41.849 | INFO     | before.py:40 | Starting call to 'chatbot_app.get_tool_definitions_from_mcp_server', this is the 1st time calling it.
2025-06-03 23:48:41.849 | INFO     | chatbot_app.py:51 | Attempting to load tool definitions from MCP Server at http://localhost:5001/tool_definitions...
2025-06-03 23:48:43.920 | INFO     | chatbot_app.py:54 | Successfully loaded tool definitions from MCP Server.
2025-06-03 23:48:43.921 | INFO     | chatbot_app.py:107 | Fixed tool definitions: [{'name': 'search_rooms', 'description': 'Tìm kiếm các phòng trọ có sẵn dựa trên các tiêu chí cụ thể như vị trí, giá cả, tiện ích và môi trường xung quanh.', 'parameters': {'type': 'OBJECT', 'properties': {'street': {'type': 'STRING', 'description': 'Tên đường của phòng trọ.'}, 'district': {'type': 'STRING', 'description': 'Quận của phòng trọ.'}, 'city': {'type': 'STRING', 'description': 'Thành phố của phòng trọ.'}, 'minPrice': {'type': 'NUMBER', 'description': 'Giá tối thiểu của phòng trọ.'}, 'maxPrice': {'type': 'NUMBER', 'description': 'Giá tối đa của phòng trọ.'}, 'areaRange': {'type': 'STRING', 'enum': ['UNDER_20', '20_40', '40_60', '60_80', 'OVER_80'], 'description': "Khoảng diện tích phòng trọ. Các giá trị hợp lệ:\n- 'UNDER_20': Dưới 20m²\n- '20_40': Từ 20m² đến 40m²\n- '40_60': Từ 40m² đến 60m²\n- '60_80': Từ 60m² đến 80m²\n- 'OVER_80': Trên 80m²\nNếu không khớp giá trị nào, sẽ không lọc theo diện tích."}, 'roomType': {'type': 'STRING', 'description': 'Loại phòng trọ.'}, 'amenities': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Danh sách các tiện ích mong muốn.'}, 'environment': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Môi trường xung quanh phòng trọ.'}, 'targetAudience': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Đối tượng mục tiêu của phòng trọ.'}, 'hasVideoReview': {'type': 'BOOLEAN', 'description': 'Phòng trọ có video review hay không. Nếu không cung cấp, sẽ không lọc theo tiêu chí này.'}}, 'required': []}}]
2025-06-03 23:48:56.804 | INFO     | chatbot_app.py:139 | User: Tôi cần tìm phòng trọ ở thành phố Hồ Chí Minh, quận Gò Vấp với giá dưới 3 triệu
2025-06-03 23:48:57.800 | INFO     | chatbot_app.py:153 | Gemini wants to call tool: 'search_rooms' with arguments: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-03 23:48:57.804 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 1st time calling it.
2025-06-03 23:48:57.805 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-03 23:49:02.160 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-03 23:49:04.165 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 2nd time calling it.
2025-06-03 23:49:04.165 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-03 23:49:08.514 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-03 23:49:10.518 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 3rd time calling it.
2025-06-03 23:49:10.518 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-03 23:49:14.855 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-03 23:49:14.856 | ERROR    | chatbot_app.py:160 | Failed to execute tool 'search_rooms' after retries: RetryError[<Future at 0x15d9b1c4490 state=finished raised HTTPError>]
2025-06-03 23:49:14.858 | ERROR    | chatbot_app.py:172 | Error from MCP Server: Không thể thực hiện tìm kiếm phòng trọ lúc này: RetryError[<Future at 0x15d9b1c4490 state=finished raised HTTPError>]
2025-06-03 23:49:15.646 | INFO     | chatbot_app.py:177 | Bot (Error): Xin lỗi, hiện tại hệ thống đang gặp sự cố khi tìm kiếm phòng trọ. Bạn vui lòng thử lại sau nhé.
2025-06-03 23:54:15.288 | INFO     | chatbot_app.py:139 | User: Tôi cần tìm phòng trọ ở thành phố Hồ Chí Minh, quận Gò Vấp với giá dưới 3 triệu
2025-06-03 23:54:16.305 | INFO     | chatbot_app.py:153 | Gemini wants to call tool: 'search_rooms' with arguments: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-03 23:54:16.346 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 1st time calling it.
2025-06-03 23:54:16.346 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-03 23:54:20.714 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-03 23:54:22.715 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 2nd time calling it.
2025-06-03 23:54:22.715 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-03 23:54:27.084 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-03 23:54:29.086 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 3rd time calling it.
2025-06-03 23:54:29.086 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-03 23:54:33.443 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-03 23:54:33.446 | ERROR    | chatbot_app.py:160 | Failed to execute tool 'search_rooms' after retries: RetryError[<Future at 0x15d9b1de390 state=finished raised HTTPError>]
2025-06-03 23:54:33.456 | ERROR    | chatbot_app.py:172 | Error from MCP Server: Không thể thực hiện tìm kiếm phòng trọ lúc này: RetryError[<Future at 0x15d9b1de390 state=finished raised HTTPError>]
2025-06-03 23:54:34.204 | INFO     | chatbot_app.py:177 | Bot (Error): Rất tiếc, hệ thống vẫn đang gặp sự cố. Vui lòng thử lại sau.
2025-06-03 23:57:08.525 | WARNING  | chatbot_app.py:43 | MCP_SERVER_BASE_URL is set to default localhost. Ensure this is correct for your deployment.
2025-06-03 23:57:08.525 | INFO     | before.py:40 | Starting call to 'chatbot_app.get_tool_definitions_from_mcp_server', this is the 1st time calling it.
2025-06-03 23:57:08.526 | INFO     | chatbot_app.py:51 | Attempting to load tool definitions from MCP Server at http://localhost:5001/tool_definitions...
2025-06-03 23:57:10.591 | INFO     | chatbot_app.py:54 | Successfully loaded tool definitions from MCP Server.
2025-06-03 23:57:10.592 | INFO     | chatbot_app.py:107 | Fixed tool definitions: [{'name': 'search_rooms', 'description': 'Tìm kiếm các phòng trọ có sẵn dựa trên các tiêu chí cụ thể như vị trí, giá cả, tiện ích và môi trường xung quanh.', 'parameters': {'type': 'OBJECT', 'properties': {'street': {'type': 'STRING', 'description': 'Tên đường của phòng trọ.'}, 'district': {'type': 'STRING', 'description': 'Quận của phòng trọ.'}, 'city': {'type': 'STRING', 'description': 'Thành phố của phòng trọ.'}, 'minPrice': {'type': 'NUMBER', 'description': 'Giá tối thiểu của phòng trọ.'}, 'maxPrice': {'type': 'NUMBER', 'description': 'Giá tối đa của phòng trọ.'}, 'areaRange': {'type': 'STRING', 'enum': ['UNDER_20', '20_40', '40_60', '60_80', 'OVER_80'], 'description': "Khoảng diện tích phòng trọ. Các giá trị hợp lệ:\n- 'UNDER_20': Dưới 20m²\n- '20_40': Từ 20m² đến 40m²\n- '40_60': Từ 40m² đến 60m²\n- '60_80': Từ 60m² đến 80m²\n- 'OVER_80': Trên 80m²\nNếu không khớp giá trị nào, sẽ không lọc theo diện tích."}, 'roomType': {'type': 'STRING', 'description': 'Loại phòng trọ.'}, 'amenities': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Danh sách các tiện ích mong muốn.'}, 'environment': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Môi trường xung quanh phòng trọ.'}, 'targetAudience': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Đối tượng mục tiêu của phòng trọ.'}, 'hasVideoReview': {'type': 'BOOLEAN', 'description': 'Phòng trọ có video review hay không. Nếu không cung cấp, sẽ không lọc theo tiêu chí này.'}}, 'required': []}}]
2025-06-03 23:57:18.569 | INFO     | chatbot_app.py:139 | User: Tôi cần tìm phòng trọ ở thành phố Hồ Chí Minh, quận Gò Vấp với giá dưới 3 triệu
2025-06-03 23:57:19.601 | INFO     | chatbot_app.py:153 | Gemini wants to call tool: 'search_rooms' with arguments: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-03 23:57:19.602 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 1st time calling it.
2025-06-03 23:57:19.602 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-03 23:57:22.155 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-03 23:57:24.157 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 2nd time calling it.
2025-06-03 23:57:24.157 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-03 23:57:26.428 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-03 23:57:28.432 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 3rd time calling it.
2025-06-03 23:57:28.432 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-03 23:57:30.741 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-03 23:57:30.747 | ERROR    | chatbot_app.py:160 | Failed to execute tool 'search_rooms' after retries: RetryError[<Future at 0x1f9fa9f6050 state=finished raised HTTPError>]
2025-06-03 23:57:30.749 | ERROR    | chatbot_app.py:172 | Error from MCP Server: Không thể thực hiện tìm kiếm phòng trọ lúc này: RetryError[<Future at 0x1f9fa9f6050 state=finished raised HTTPError>]
2025-06-03 23:57:31.672 | INFO     | chatbot_app.py:177 | Bot (Error): Tôi rất tiếc vì đã không thể tìm phòng trọ cho bạn lúc này. Có vẻ như hệ thống đang gặp sự cố. Vui lòng thử lại sau.

2025-06-04 00:02:56.297 | WARNING  | chatbot_app.py:43 | MCP_SERVER_BASE_URL is set to default localhost. Ensure this is correct for your deployment.
2025-06-04 00:02:56.297 | INFO     | before.py:40 | Starting call to 'chatbot_app.get_tool_definitions_from_mcp_server', this is the 1st time calling it.
2025-06-04 00:02:56.298 | INFO     | chatbot_app.py:51 | Attempting to load tool definitions from MCP Server at http://localhost:5001/tool_definitions...
2025-06-04 00:02:58.336 | INFO     | chatbot_app.py:54 | Successfully loaded tool definitions from MCP Server.
2025-06-04 00:02:58.337 | INFO     | chatbot_app.py:107 | Fixed tool definitions: [{'name': 'search_rooms', 'description': 'Tìm kiếm các phòng trọ có sẵn dựa trên các tiêu chí cụ thể như vị trí, giá cả, tiện ích và môi trường xung quanh.', 'parameters': {'type': 'OBJECT', 'properties': {'street': {'type': 'STRING', 'description': 'Tên đường của phòng trọ.'}, 'district': {'type': 'STRING', 'description': 'Quận của phòng trọ.'}, 'city': {'type': 'STRING', 'description': 'Thành phố của phòng trọ.'}, 'minPrice': {'type': 'NUMBER', 'description': 'Giá tối thiểu của phòng trọ.'}, 'maxPrice': {'type': 'NUMBER', 'description': 'Giá tối đa của phòng trọ.'}, 'areaRange': {'type': 'STRING', 'enum': ['UNDER_20', '20_40', '40_60', '60_80', 'OVER_80'], 'description': "Khoảng diện tích phòng trọ. Các giá trị hợp lệ:\n- 'UNDER_20': Dưới 20m²\n- '20_40': Từ 20m² đến 40m²\n- '40_60': Từ 40m² đến 60m²\n- '60_80': Từ 60m² đến 80m²\n- 'OVER_80': Trên 80m²\nNếu không khớp giá trị nào, sẽ không lọc theo diện tích."}, 'roomType': {'type': 'STRING', 'description': 'Loại phòng trọ.'}, 'amenities': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Danh sách các tiện ích mong muốn.'}, 'environment': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Môi trường xung quanh phòng trọ.'}, 'targetAudience': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Đối tượng mục tiêu của phòng trọ.'}, 'hasVideoReview': {'type': 'BOOLEAN', 'description': 'Phòng trọ có video review hay không. Nếu không cung cấp, sẽ không lọc theo tiêu chí này.'}}, 'required': []}}]
2025-06-04 00:03:03.862 | INFO     | chatbot_app.py:139 | User: Tôi cần tìm phòng trọ ở thành phố Hồ Chí Minh, quận Gò Vấp với giá dưới 3 triệu
2025-06-04 00:03:07.885 | INFO     | chatbot_app.py:153 | Gemini wants to call tool: 'search_rooms' with arguments: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-04 00:03:07.888 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 1st time calling it.
2025-06-04 00:03:07.888 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-04 00:03:13.045 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-04 00:03:15.046 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 2nd time calling it.
2025-06-04 00:03:15.046 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-04 00:03:19.625 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-04 00:03:21.632 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 3rd time calling it.
2025-06-04 00:03:21.632 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-04 00:03:26.224 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-04 00:03:26.227 | ERROR    | chatbot_app.py:160 | Failed to execute tool 'search_rooms' after retries: RetryError[<Future at 0x1a922eb5d50 state=finished raised HTTPError>]
2025-06-04 00:03:26.228 | ERROR    | chatbot_app.py:172 | Error from MCP Server: Không thể thực hiện tìm kiếm phòng trọ lúc này: RetryError[<Future at 0x1a922eb5d50 state=finished raised HTTPError>]
2025-06-04 00:03:27.106 | INFO     | chatbot_app.py:177 | Bot (Error): Tôi rất tiếc vì đã không thể tìm phòng trọ cho bạn lúc này. Có vẻ như hệ thống đang gặp sự cố. Bạn có muốn thử lại sau một chút không?
2025-06-04 00:05:13.155 | WARNING  | chatbot_app.py:43 | MCP_SERVER_BASE_URL is set to default localhost. Ensure this is correct for your deployment.
2025-06-04 00:05:13.156 | INFO     | before.py:40 | Starting call to 'chatbot_app.get_tool_definitions_from_mcp_server', this is the 1st time calling it.
2025-06-04 00:05:13.157 | INFO     | chatbot_app.py:51 | Attempting to load tool definitions from MCP Server at http://localhost:5001/tool_definitions...
2025-06-04 00:05:15.404 | INFO     | chatbot_app.py:54 | Successfully loaded tool definitions from MCP Server.
2025-06-04 00:05:15.408 | INFO     | chatbot_app.py:107 | Fixed tool definitions: [{'name': 'search_rooms', 'description': 'Tìm kiếm các phòng trọ có sẵn dựa trên các tiêu chí cụ thể như vị trí, giá cả, tiện ích và môi trường xung quanh.', 'parameters': {'type': 'OBJECT', 'properties': {'street': {'type': 'STRING', 'description': 'Tên đường của phòng trọ.'}, 'district': {'type': 'STRING', 'description': 'Quận của phòng trọ.'}, 'city': {'type': 'STRING', 'description': 'Thành phố của phòng trọ.'}, 'minPrice': {'type': 'NUMBER', 'description': 'Giá tối thiểu của phòng trọ.'}, 'maxPrice': {'type': 'NUMBER', 'description': 'Giá tối đa của phòng trọ.'}, 'areaRange': {'type': 'STRING', 'enum': ['UNDER_20', '20_40', '40_60', '60_80', 'OVER_80'], 'description': "Khoảng diện tích phòng trọ. Các giá trị hợp lệ:\n- 'UNDER_20': Dưới 20m²\n- '20_40': Từ 20m² đến 40m²\n- '40_60': Từ 40m² đến 60m²\n- '60_80': Từ 60m² đến 80m²\n- 'OVER_80': Trên 80m²\nNếu không khớp giá trị nào, sẽ không lọc theo diện tích."}, 'roomType': {'type': 'STRING', 'description': 'Loại phòng trọ.'}, 'amenities': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Danh sách các tiện ích mong muốn.'}, 'environment': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Môi trường xung quanh phòng trọ.'}, 'targetAudience': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Đối tượng mục tiêu của phòng trọ.'}, 'hasVideoReview': {'type': 'BOOLEAN', 'description': 'Phòng trọ có video review hay không. Nếu không cung cấp, sẽ không lọc theo tiêu chí này.'}}, 'required': []}}]
2025-06-04 00:05:26.828 | INFO     | chatbot_app.py:139 | User: Tôi cần tìm phòng trọ ở thành phố Hồ Chí Minh, quận Gò Vấp với giá dưới 3 triệu
2025-06-04 00:05:29.108 | INFO     | chatbot_app.py:153 | Gemini wants to call tool: 'search_rooms' with arguments: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-04 00:05:29.110 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 1st time calling it.
2025-06-04 00:05:29.110 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-04 00:05:33.865 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-04 00:05:35.866 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 2nd time calling it.
2025-06-04 00:05:35.866 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-04 00:05:40.466 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-04 00:05:42.469 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 3rd time calling it.
2025-06-04 00:05:42.469 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-04 00:05:47.592 | ERROR    | chatbot_app.py:131 | Error calling MCP Server tool 'search_rooms': 500 Server Error: Internal Server Error for url: http://localhost:5001/tools/search_rooms
2025-06-04 00:05:47.593 | ERROR    | chatbot_app.py:160 | Failed to execute tool 'search_rooms' after retries: RetryError[<Future at 0x1ac74154490 state=finished raised HTTPError>]
2025-06-04 00:05:47.595 | ERROR    | chatbot_app.py:172 | Error from MCP Server: Không thể thực hiện tìm kiếm phòng trọ lúc này: RetryError[<Future at 0x1ac74154490 state=finished raised HTTPError>]
2025-06-04 00:05:48.281 | INFO     | chatbot_app.py:177 | Bot (Error): Xin lỗi, hiện tại hệ thống đang gặp sự cố khi tìm kiếm phòng trọ. Bạn vui lòng thử lại sau nhé.
2025-06-04 00:07:15.055 | WARNING  | chatbot_app.py:43 | MCP_SERVER_BASE_URL is set to default localhost. Ensure this is correct for your deployment.
2025-06-04 00:07:15.056 | INFO     | before.py:40 | Starting call to 'chatbot_app.get_tool_definitions_from_mcp_server', this is the 1st time calling it.
2025-06-04 00:07:15.056 | INFO     | chatbot_app.py:51 | Attempting to load tool definitions from MCP Server at http://localhost:5001/tool_definitions...
2025-06-04 00:07:17.105 | INFO     | chatbot_app.py:54 | Successfully loaded tool definitions from MCP Server.
2025-06-04 00:07:17.106 | INFO     | chatbot_app.py:107 | Fixed tool definitions: [{'name': 'search_rooms', 'description': 'Tìm kiếm các phòng trọ có sẵn dựa trên các tiêu chí cụ thể như vị trí, giá cả, tiện ích và môi trường xung quanh.', 'parameters': {'type': 'OBJECT', 'properties': {'street': {'type': 'STRING', 'description': 'Tên đường của phòng trọ.'}, 'district': {'type': 'STRING', 'description': 'Quận của phòng trọ.'}, 'city': {'type': 'STRING', 'description': 'Thành phố của phòng trọ.'}, 'minPrice': {'type': 'NUMBER', 'description': 'Giá tối thiểu của phòng trọ.'}, 'maxPrice': {'type': 'NUMBER', 'description': 'Giá tối đa của phòng trọ.'}, 'areaRange': {'type': 'STRING', 'enum': ['UNDER_20', '20_40', '40_60', '60_80', 'OVER_80'], 'description': "Khoảng diện tích phòng trọ. Các giá trị hợp lệ:\n- 'UNDER_20': Dưới 20m²\n- '20_40': Từ 20m² đến 40m²\n- '40_60': Từ 40m² đến 60m²\n- '60_80': Từ 60m² đến 80m²\n- 'OVER_80': Trên 80m²\nNếu không khớp giá trị nào, sẽ không lọc theo diện tích."}, 'roomType': {'type': 'STRING', 'description': 'Loại phòng trọ.'}, 'amenities': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Danh sách các tiện ích mong muốn.'}, 'environment': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Môi trường xung quanh phòng trọ.'}, 'targetAudience': {'type': 'ARRAY', 'items': {'type': 'STRING'}, 'description': 'Đối tượng mục tiêu của phòng trọ.'}, 'hasVideoReview': {'type': 'BOOLEAN', 'description': 'Phòng trọ có video review hay không. Nếu không cung cấp, sẽ không lọc theo tiêu chí này.'}}, 'required': []}}]
2025-06-04 00:07:20.022 | INFO     | chatbot_app.py:139 | User: Tôi cần tìm phòng trọ ở thành phố Hồ Chí Minh, quận Gò Vấp với giá dưới 3 triệu
2025-06-04 00:07:23.245 | INFO     | chatbot_app.py:153 | Gemini wants to call tool: 'search_rooms' with arguments: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-04 00:07:23.284 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 1st time calling it.
2025-06-04 00:07:23.284 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-04 00:07:28.094 | INFO     | chatbot_app.py:165 | Sending tool call result back to Gemini...
2025-06-04 00:07:30.010 | INFO     | chatbot_app.py:168 | Bot: Tôi đã tìm thấy một phòng trọ ở quận Gò Vấp, Hồ Chí Minh với giá 1.500.000 VNĐ. Bạn có muốn xem thêm chi tiết không?
2025-06-04 00:09:15.069 | INFO     | chatbot_app.py:139 | User: Tôi cần tìm phòng trọ ở thành phố Hồ Chí Minh, quận Gò Vấp với giá dưới 3 triệu
2025-06-04 00:09:16.891 | INFO     | chatbot_app.py:153 | Gemini wants to call tool: 'search_rooms' with arguments: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-04 00:09:16.901 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 1st time calling it.
2025-06-04 00:09:16.902 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-04 00:09:21.716 | INFO     | chatbot_app.py:165 | Sending tool call result back to Gemini...
2025-06-04 00:09:22.554 | INFO     | chatbot_app.py:168 | Bot: Tôi chỉ tìm thấy một phòng trọ phù hợp với yêu cầu của bạn. Bạn có muốn tôi tìm kiếm với các tiêu chí khác không?
2025-06-04 00:09:28.538 | INFO     | chatbot_app.py:139 | User: Tôi cần tìm phòng trọ ở thành phố Hồ Chí Minh, quận Gò Vấp với giá dưới 3 triệu
2025-06-04 00:09:30.346 | INFO     | chatbot_app.py:153 | Gemini wants to call tool: 'search_rooms' with arguments: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-04 00:09:30.347 | DEBUG    | before.py:40 | Starting call to 'chatbot_app.call_mcp_tool', this is the 1st time calling it.
2025-06-04 00:09:30.347 | INFO     | chatbot_app.py:125 | Calling MCP Server endpoint: http://localhost:5001/tools/search_rooms with args: {'district': 'Gò Vấp', 'maxPrice': 3000000.0, 'city': 'Hồ Chí Minh'}
2025-06-04 00:09:35.867 | INFO     | chatbot_app.py:165 | Sending tool call result back to Gemini...
2025-06-04 00:09:36.997 | INFO     | chatbot_app.py:168 | Bot: Tôi vẫn chỉ tìm thấy một phòng trọ duy nhất đáp ứng yêu cầu của bạn. Đó là một phòng trọ giá rẻ cho sinh viên với giá 1.500.000 VNĐ, diện tích 16m2, loại phòng APARTMENT, ở quận Gò Vấp, Hồ Chí Minh. Bạn có muốn xem thêm chi tiết về phòng trọ này không?

2025-06-04 00:09:50.128 | INFO     | chatbot_app.py:139 | User: có
2025-06-04 00:09:50.865 | INFO     | chatbot_app.py:181 | Gemini responded directly: Tôi rất tiếc, tôi không có khả năng cung cấp thêm chi tiết về phòng trọ này.
